<form action="/admin/updateTicket" method="post">

    <div>
        <input type="hidden" name="id" value="{id}"/>
        <div>
            <label for="area">Area:</label>
            <div>
                <input type="text" id="area" name="area" value="{area}" />
            </div>
        </div>

        <div>
            <label for="priority">Priority</label>
            <div>
            <input type="text" id="priority" name="priority" value="{priority}" required />
            </div>
        </div>   

        <div>
            <label for="desireResolutionDate">Desire Resolution Date:</label>
            <div>
                <input type="date" id="desired_resolution_date" name="desired_resolution_date" value="{desired_resolution_date}" required />
            </div>
        </div>
        

        <div>
            <label for="creation_date">Creation date</label>
            <div>
                <input type="datetime" id="creation_date" name="creation_date" value="{creation_date}" required/>
            </div>
        </div>

        <div>
            <label for="issue">issue</label>
            <div>
                <input type="text" id="issue" name="issue" value="{issue}" required/>
            </div>
        </div>
        
        <div>
            <label for="status">satatus</label>
            <div>
                <select name="status" id="status">
                    <option value="{status}">{status}</option>
                    <option value="open">open</option>
                    <option value="process">progress</option>
                    <option value="solved">solved</option>
                </select>
            </div>
        </div>
        <div>
            <label for="assigned_technician">assigned_technician</label>
            <div>
                <select name="technician" id="technician">
                    <!--technicians-->
                    <option value="{id}">{name}</option>
                    <!--technicians-->
                </select>
            </div>
        </div>
        <div>
            <label for="created_by">created by</label>
            <div>
                <input type="text" id="created_by" name="created_by" value="{created_by}" required/>
            </div>
        </div>
        <div>
            <label for="resolution_date">resolution date</label>
            <div>
            <input
                type="datetime-local"
                id="resolution-time"
                name="resolution_date"
                
            />
        </div>
        </div>

        <div>
            <label for="solution">solution</label>
            <div>
                <input type="text" value="{solution}" name="solution" id="solution"></input>
            </div>
        </div>

        <div>
            <label for="response">response</label>
            <div>
                <input type="text" value="{response}">
            </div>
        </div>

        

        <div>
            <label for="rating">Rating</label>
            <div>
                <span>{rating}</span>
            </div>
        </div>
        
        <div>
            <div>
                <td>
                    <a href="/{photo_route}" target="_blank">
                        <img src="/{photo_route}" alt="photo" width="500" height="600" />
                    </a>
                </td>
            </div>
        </div>
            
        
        <input type="submit" class="btn btn-primary" value="Save changes" />
    </div>
    
</form>

<script>

document.addEventListener("DOMContentLoaded", function () {
    // Obtener el elemento input por su ID
    var resolutionTimeInput = document.getElementById('resolution-time');

    // Obtener la fecha y hora actual en la zona horaria local (Ciudad de México)
    var now = new Date();
    var year = now.getFullYear();
    var month = ('0' + (now.getMonth() + 1)).slice(-2); // Se suma 1 porque los meses comienzan desde 0
    var day = ('0' + now.getDate()).slice(-2);
    var hour = ('0' + now.getHours()).slice(-2);
    var minute = ('0' + now.getMinutes()).slice(-2);

    // Formar la cadena en el formato correcto
    var currentDatetime = year + '-' + month + '-' + day + 'T' + hour + ':' + minute;

    // Establecer la hora actual como valor predeterminado
    resolutionTimeInput.value = currentDatetime;

    console.log("Fecha y hora actual en Ciudad de México:", now.toLocaleString('es-MX'));
    console.log("Valor establecido en el campo:", resolutionTimeInput.value);
});



        
</script>